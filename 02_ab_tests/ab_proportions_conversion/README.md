# A/B тест: влияние новой страницы на конверсию

## 1) Задача
Проверить, изменилась ли конверсия пользователей в группе **treatment** по сравнению с **control** после изменения страницы

## 2) Данные
В датасете по каждому пользователю есть:
- user_id — идентификатор пользователя
- timestamp — время события
- group — группа (control / treatment)
- landing_page — показанная страница (old_page / new_page)
- converted — конверсия (0 или 1)

Единица наблюдения — пользователь (важно, чтобы один пользователь учитывался один раз)

## 3) Гипотезы
- **H0:** конверсия в treatment и control одинаковая (p_treatment = p_control)
- **H1:** конверсия отличается (p_treatment ≠ p_control)

Уровень значимости: **0.05**

## 4) Что проверил и как подготовил данные
Чтобы сравнение групп было корректным, сделал базовые проверки и очистку:

1) **Проверка значений и структуры данных**  
Проверил типы столбцов, пропуски, что converted принимает значения 0/1

2) **Проверка распределения по группам**  
Посмотрел, сколько пользователей в каждой группе (баланс)

3) **Проверка корректности показа страниц (группа ↔ страница)**  
Проверил, что:
- control должен видеть old_page
- treatment должен видеть new_page

Если часть пользователей попала не на ту страницу, без очистки эксперимент сравнивает смесь условий и результат может быть неверным.  
Поэтому удалил строки, где эта логика не выполнялась

4) **Удаление дублей пользователей**  
Привёл данные к формату **1 user_id = 1 строка**, чтобы один пользователь не весил больше других

## 5) Как считал метрику и эффект
Метрика: **конверсия** = доля пользователей с converted = 1

Считал по группам:
- success = сколько converted = 1
- nobs = сколько всего пользователей
- conversion = success / nobs

Эффект:
- **delta = conversion_treatment − conversion_control**

## 6) Основной результат
- Конверсия в **control**: **≈ 0.1193**
- Конверсия в **treatment**: **≈ 0.1231**
- Эффект: **delta ≈ +0.0037** (то есть **+0.37 п.п.**)

Проверка статистической значимости:
- **p-value ≈ 0.005 < 0.05** → разница **статистически значима**
- **95% доверительный интервал для delta: [0.001; 0.006]** → интервал **не пересекает 0**, эффект **положительный**

## 7) Проверка устойчивости по дням (дополнительная диагностика)
Конверсия по дням может “скакать”, поэтому проверил устойчивость результата:

- **Размер выборки по дням** в обеих группах **стабилен** (в среднем ~**8442** пользователей/день, разброс небольшой)
  Значит, колебания дневной конверсии не объясняются тем, что в какие-то дни “пришло слишком мало/много людей”

- **Дневная дельта** колеблется от **−0.0043** до **+0.0091**, при этом:
  - средняя дневная дельта **≈ +0.00383**
  - медианная дневная дельта **≈ +0.00374**

Это говорит о том, что эффект не выглядит как результат “одного особенного дня”: в среднем дельта по дням чаще положительная

## 8) Итоговое решение
По данным эксперимента рост конверсии в treatment **подтверждён статистически**: **+0.37 п.п.**, p-value **≈ 0.005**, 95% ДИ **[+0.10; +0.60] п.п.**

Дальше решение о внедрении зависит от бизнес-порога (минимально полезного эффекта):
- если **+0.37 п.п.** достаточно — фичу можно внедрять;
- если нет — тест/гипотезу нужно дорабатывать (например, ожидать больший эффект или менять решение в продукте)
